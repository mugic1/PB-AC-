<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Science Bottle Roll Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --board-max-width: 400px; /* Maximum size of the main game board */
            --modal-board-max-width: 280px; /* Maximum size of the modal game board */
        }

        body {
            font-family: 'Poppins', sans-serif;
            touch-action: manipulation;
            background: linear-gradient(270deg, #111827, #1e293b, #334155, #1e293b);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            overflow-x: hidden; /* Horizontal scroll ko rokne ke liye */
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .bottle {
            transition: transform 4s cubic-bezier(0.25, 1, 0.5, 1);
            cursor: pointer;
            transform: rotate(-45deg); /* Shuruaati position */
            text-shadow: 0 4px 15px rgba(0,0,0,0.4);
            /* Fluid font size for emoji */
            font-size: clamp(4rem, 18vw, 6rem);
        }

        .game-board {
            width: 85vw; /* Viewport width ka 85% */
            height: 85vw; /* Aspect ratio maintain karne ke liye */
            max-width: var(--board-max-width); /* Lekin isse zyada bada nahi hoga */
            max-height: var(--board-max-width);
            box-shadow: 0 0 20px rgba(0,0,0,0.5), inset 0 0 15px rgba(0,0,0,0.3);
        }
        
        .option {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            font-weight: 700;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
        }

        .option-label {
             /* Fluid font size for options */
            font-size: clamp(0.8rem, 3.5vw, 1.25rem);
            margin-top: clamp(10px, 4%, 20px); /* Responsive margin */
        }
        
        .option-biology { transform: rotate(60deg); }
        .option-chemistry { transform: rotate(180deg); }
        .option-physics { transform: rotate(300deg); }
        .label-rotator { transform: rotate(-90deg); }

        .modal {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .modal-content {
             transition: transform 0.3s ease;
        }

        .modal.hidden {
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none;
        }

        .modal:not(.hidden) .modal-content {
            transform: scale(1);
        }

        .fact-container {
            min-height: 70px;
            transition: all 0.3s ease;
        }
        
        .pointer {
            width: 0;
            height: 0;
            border-left: clamp(10px, 4vw, 15px) solid transparent;
            border-right: clamp(10px, 4vw, 15px) solid transparent;
            border-bottom: clamp(20px, 8vw, 30px) solid #f59e0b;
            position: absolute;
            top: clamp(-20px, -8%, -28px); /* Adjust position based on size */
            left: 50%;
            transform: translateX(-50%);
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.5));
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <!-- Main Game -->
    <main id="mainGame" class="flex flex-col items-center justify-center text-center space-y-6 w-full max-w-lg">
        <h1 class="text-4xl md:text-5xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-sky-400 to-red-400 animate-pulse">Science Spin-Off</h1>
        <p id="mainResult" class="text-xl h-8 font-semibold text-slate-300 transition-all duration-300">Let's Play!</p>

        <div class="relative flex items-center justify-center">
            <div class="pointer"></div>
            <div class="game-board rounded-full relative bg-conic-gradient from-emerald-500 via-sky-500 to-red-500">
                <!-- Options -->
                <div class="option option-biology"><div class="option-label label-rotator">Biology</div></div>
                <div class="option option-chemistry"><div class="option-label label-rotator">Chemistry</div></div>
                <div class="option option-physics"><div class="option-label label-rotator">Physics</div></div>
                
                <!-- Bottle Emoji -->
                <div class="absolute w-full h-full flex items-center justify-center">
                    <div id="mainBottle" class="bottle" onclick="spinMainBottle()">üçæ</div>
                </div>
            </div>
        </div>
        
        <button id="mainSpinBtn" onclick="spinMainBottle()" class="px-8 py-3 bg-gradient-to-r from-purple-600 to-indigo-700 text-white font-bold rounded-full shadow-lg hover:shadow-xl hover:scale-105 transform transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-purple-400 disabled:opacity-50 disabled:cursor-not-allowed">
            SPIN
        </button>

        <div id="mainFactContainer" class="fact-container w-full p-4 bg-slate-800/50 rounded-lg shadow-inner hidden"></div>
    </main>

    <!-- Modals (Biology and Chemistry) -->
    <div id="subGameModal" class="modal hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
        <div class="modal-content scale-95 bg-slate-800 rounded-2xl p-6 shadow-xl text-center space-y-4 relative w-full max-w-sm">
             <h2 id="modalTitle" class="text-3xl font-bold"></h2>
             <p id="modalResult" class="text-lg h-7 text-slate-300"></p>
             <div class="relative flex items-center justify-center">
                <div class="pointer"></div>
                <div id="modalBoard" class="rounded-full relative shadow-2xl" style="width: 70vw; height: 70vw; max-width: var(--modal-board-max-width); max-height: var(--modal-board-max-width);">
                     <div class="option" style="transform: rotate(90deg);"><div id="modalOption1" class="option-label label-rotator text-base"></div></div>
                     <div class="option" style="transform: rotate(270deg);"><div id="modalOption2" class="option-label label-rotator text-base"></div></div>
                     <div class="absolute w-full h-full flex items-center justify-center">
                        <div id="modalBottle" class="bottle" style="font-size: clamp(3.5rem, 15vw, 5rem);" onclick="spinSubBottle()">üçæ</div>
                    </div>
                </div>
             </div>
             <div id="modalFactContainer" class="fact-container p-3 bg-slate-700/50 rounded-md shadow-inner text-slate-200"></div>
             <div class="flex gap-4 mt-2">
                <button id="modalSpinBtn" onclick="spinSubBottle()" class="w-full px-6 py-2 font-bold rounded-full shadow-lg hover:scale-105 transform transition duration-300 disabled:opacity-50"></button>
                <button onclick="closeModal()" class="w-full px-6 py-2 bg-slate-600 font-bold rounded-full shadow-lg hover:bg-slate-700 transform transition duration-300">Close</button>
             </div>
        </div>
    </div>


    <script>
        // Facts (Simple Logic)
        const scienceFacts = {
            Physics: [
                "Neutron stars itni ghani hoti hain ki unka ek chammach 6 billion ton wazani hoga.",
                "Agar aap light ki speed se travel kar pate, toh aapke liye samay ruk jaata.",
                "Universe ka koi center nahi hai aur yeh lagatar expand ho raha hai.",
                "Awaaz space mein travel nahi kar sakti kyunki wahan koi medium nahi hai."
            ],
            Botany: [
                "Duniya ka sabse purana ped, Methuselah, 4,800 saal se bhi zyada purana hai.",
                "Bamboo ek prakaar ki ghaas hai, aur yeh duniya ke sabse tezi se badhne wale paudhon mein se ek hai.",
                "85% se zyada paudhe samudra mein paaye jaate hain.",
                "Ginkgo Biloba ped ek 'jeevit jeevashm' hai, jo 270 million saal se astitva mein hai."
            ],
            Zoology: [
                "Ek blue whale ka dil ek chhoti car ke size ka hota hai.",
                "Ek octopus ke teen dil aur neela khoon hota hai.",
                "Amar jellyfish mature hone ke baad apni bachpan ki avastha mein wapas ja sakti hai.",
                "Girgit ki jeebh uske shareer se duguni lambi hoti hai."
            ],
            'Physical Chemistry': [
                "Kaanch ek amorphous solid hai, matlab yeh ek liquid hai jo bahut dheere-dheere behta hai.",
                "Paani ek hi samay mein teen avasthaon (thos, drav, gas) mein reh sakta hai. Ise triple point kehte hain.",
                "Heera aur graphite dono pure carbon se bane hain, lekin unke atoms alag tarah se jude hote hain.",
            ],
            'Inorganic Chemistry': [
                "Gallium ek aisi dhaatu hai jo aapke haath mein pighal jaayegi.",
                "Sona aur taamba hi sirf do non-silvery dhaatu hain.",
                "Jung iron oxide ka ek roop hai, jo tab banta hai jab loha oxygen aur paani ke saath react karta hai.",
            ]
        };

        // DOM Elements
        const mainBottle = document.getElementById('mainBottle');
        const mainSpinBtn = document.getElementById('mainSpinBtn');
        const mainResult = document.getElementById('mainResult');
        const mainFactContainer = document.getElementById('mainFactContainer');
        
        const modal = document.getElementById('subGameModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalResult = document.getElementById('modalResult');
        const modalBoard = document.getElementById('modalBoard');
        const modalOption1 = document.getElementById('modalOption1');
        const modalOption2 = document.getElementById('modalOption2');
        const modalBottle = document.getElementById('modalBottle');
        const modalFactContainer = document.getElementById('modalFactContainer');
        const modalSpinBtn = document.getElementById('modalSpinBtn');

        // Game State
        let mainRotation = 0;
        let isMainSpinning = false;
        let subGameRotation = 0;
        let isSubSpinning = false;
        let currentSubGame = '';

        function displayRandomFact(topic, container) {
            const topicFacts = scienceFacts[topic];
            if (!topicFacts || topicFacts.length === 0) return;
            
            const randomIndex = Math.floor(Math.random() * topicFacts.length);
            const fact = topicFacts[randomIndex];
            
            container.innerHTML = `<p class="text-sky-200"><strong class="font-bold text-yellow-300">Kya aap jaante hain?</strong> ${fact}</p>`;
            container.classList.remove('hidden');
        }

        function spinMainBottle() {
            if (isMainSpinning) return;
            isMainSpinning = true;
            mainSpinBtn.disabled = true;
            mainResult.textContent = 'Ghoom raha hai...';
            mainFactContainer.classList.add('hidden');

            const randomSpins = Math.floor(Math.random() * 4) + 5;
            const randomAngle = Math.floor(Math.random() * 360);
            mainRotation += (randomSpins * 360) + randomAngle;
            mainBottle.style.transform = `rotate(${mainRotation}deg)`;

            setTimeout(() => {
                const finalAngle = mainRotation % 360;
                
                if (finalAngle > 240 && finalAngle <= 360) {
                    mainResult.textContent = "Yeh Physics hai! Thoda aaram karein.";
                    displayRandomFact('Physics', mainFactContainer);
                } else if (finalAngle > 120 && finalAngle <= 240) {
                    mainResult.textContent = "Yeh Chemistry hai! Dekhte hain aage kya hai...";
                    setTimeout(() => openModal('chemistry'), 800);
                } else {
                    mainResult.textContent = 'Biology! Ek nayi chunauti...';
                    setTimeout(() => openModal('biology'), 800);
                }
                
                isMainSpinning = false;
                mainSpinBtn.disabled = false;
            }, 4000); 
        }

        function spinSubBottle() {
            if (isSubSpinning) return;
            isSubSpinning = true;
            modalSpinBtn.disabled = true;
            modalResult.textContent = 'Ghoom raha hai...';
            modalFactContainer.innerHTML = '';
            
            const randomSpins = Math.floor(Math.random() * 4) + 5;
            const randomAngle = Math.floor(Math.random() * 360);
            subGameRotation += (randomSpins * 360) + randomAngle;
            modalBottle.style.transform = `rotate(${subGameRotation}deg)`;

            setTimeout(() => {
                const finalAngle = subGameRotation % 360;
                let topic = '';

                if (currentSubGame === 'biology') {
                    topic = (finalAngle > 0 && finalAngle <= 180) ? 'Botany' : 'Zoology';
                    modalResult.textContent = `Yeh ${topic} hai! ${topic === 'Botany' ? 'üå±' : 'üêæ'}`;
                } else { // chemistry
                    topic = (finalAngle > 0 && finalAngle <= 180) ? 'Physical Chemistry' : 'Inorganic Chemistry';
                    modalResult.textContent = `Yeh ${topic} hai! ${topic === 'Physical Chemistry' ? '‚öõÔ∏è' : 'üß™'}`;
                }
                
                displayRandomFact(topic, modalFactContainer);
                
                isSubSpinning = false;
                modalSpinBtn.disabled = false;
            }, 4000);
        }

        function openModal(type) {
            currentSubGame = type;
            modalResult.textContent = 'Shuru karne ke liye ghumayein!';
            modalFactContainer.innerHTML = '';
            modalFactContainer.classList.add('hidden');

            if (type === 'biology') {
                modalTitle.textContent = 'Biology Battle!';
                modalTitle.className = 'text-3xl font-bold text-emerald-300';
                modalBoard.style.background = 'conic-gradient(#059669 0deg 180deg, #15803d 180deg 360deg)';
                modalOption1.textContent = 'Botany';
                modalOption2.textContent = 'Zoology';
                modalSpinBtn.textContent = 'Phir Ghumayein';
                modalSpinBtn.className = 'w-full px-6 py-2 font-bold rounded-full shadow-lg hover:scale-105 transform transition duration-300 bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50';
            } else { // chemistry
                modalTitle.textContent = 'Chemistry Clash!';
                modalTitle.className = 'text-3xl font-bold text-sky-300';
                modalBoard.style.background = 'conic-gradient(#2563eb 0deg 180deg, #1d4ed8 180deg 360deg)';
                modalOption1.textContent = 'Physical';
                modalOption2.textContent = 'Inorganic';
                modalSpinBtn.textContent = 'Phir Ghumayein';
                modalSpinBtn.className = 'w-full px-6 py-2 font-bold rounded-full shadow-lg hover:scale-105 transform transition duration-300 bg-blue-600 hover:bg-blue-700 disabled:opacity-50';
            }
            modal.classList.remove('hidden');
        }

        function closeModal() {
            modal.classList.add('hidden');
            mainResult.textContent = 'Phir se ghumayein!';
        }
    </script>
</body>
</html>

